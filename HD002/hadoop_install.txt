移除舊的Java
yum -y remove java-*

下載及安裝Java
http://www.oracle.com/technetwork/java/javase/downloads/index.html
rpm -ivh jdk-8u25-linux-x64.rpm

設定Java ~/.bashrc
export JAVA_HOME=/usr/java/jdk1.8.0_25/
export PATH=$PATH:$JAVA_HOME


下載Hadoop
http://apache.stu.edu.tw/hadoop/common/hadoop-2.5.2/hadoop-2.5.2.tar.gz

解壓縮Hadoop
tar -zxvf hadoop-2.5.2.tar.gz

切換成 root 使用者
$ su –

使用visudo 編輯權限
$ visudo 

給予sudo 權限 (於99行處)
tibame	ALL=(ALL)	ALL

新增使用者群組 hadoop
$ sudo groupadd hadoop

新增使用者 hadoop
$ sudo useradd -g hadoop hadoop

將Hadoop 2.5.2 搬移到 /usr/local
sudo mv ~/hadoop-2.5.2 /usr/local/hadoop

更改該目錄權限
 sudo chown –R hadoop:hadoop /usr/local/hadoop


 

如需要密碼，設定
$ ssh-keygen -t dsa -P '' -f ~/.ssh/id_dsa 
$ cat ~/.ssh/id_dsa.pub >> ~/.ssh/authorized_keys

將設定加入~/.bashrc

export HADOOP_PREFIX=/usr/local/hadoop 
export HADOOP_COMMON_HOME=$HADOOP_PREFIX 
export HADOOP_HDFS_HOME=$HADOOP_PREFIX 
export HADOOP_MAPRED_HOME=$HADOOP_PREFIX 
export HADOOP_YARN_HOME=$HADOOP_PREFIX 
export HADOOP_COMMON_LIB_NATIVE_DIR=$HADOOP_PREFIX/lib/native
export HADOOP_OPTS="-Djava.library.path=$HADOOP_PREFIX/lib"
export HADOOP_CONF_DIR=$HADOOP_PREFIX/etc/hadoop 
export PATH=$PATH:$HADOOP_PREFIX/bin:$HADOOP_PREFIX/sbin


$HADOOP_HOME/etc/hadoop/core-site.xml
<property>
    <name>fs.defaultFS</name>
    <value>hdfs://localhost</value>
</property>
 
$HADOOP_HOME/etc/hadoop/hdfs-site.xml
<property>
   <name>dfs.replication</name>
   <value>1</value>
</property>

$HADOOP_HOME/etc/hadoop/yarn-site.xml
<property>
   <name>yarn.nodemanager.aux-services</name>
   <value>mapreduce_shuffle</value>
</property>

$HADOOP_HOME/etc/hadoop/mapred-site.xml
<property>
   <name>mapreduce.framework.name</name>
   <value>yarn</value>
</property>

嘗試是否可以無密碼登入
ssh localhost

修改/etc/ssh/sshd_config
將PasswordAuthentication?變更為no
service sshd restart

設置無密碼登入
ssh-keygen -t dsa -P '' -f ~/.ssh/id_dsa
cat ~/.ssh/id_dsa.pub >> ~/.ssh/authorized_keys
chmod 700 ~/.ssh
Chmod 600  ~/.ssh/authorized_keys


修改 hadoop-env.sh
更新JAVA_HOME
vi /usr/local/hadoop/etc/hadoop/hadoop-env.sh
JAVA_HOME=/usr/java/jdk1.8.0_25/

格式化HDFS
hdfs namenode –format

啟用Hadoop
單獨啟用HDFS及YARN
start-dfs.sh
start-yarn.sh

或使用
start-all.sh


